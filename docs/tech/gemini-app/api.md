# APIæ´»ç”¨ã‚¬ã‚¤ãƒ‰

Gemini APIã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€è‡ªç¤¾ã‚·ã‚¹ãƒ†ãƒ ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é«˜æ€§èƒ½AIã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚Google AI Studioã¨Vertex AIã®2ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã€ãã‚Œãã‚Œç•°ãªã‚‹ç‰¹å¾´ã¨ä¾¡æ ¼ä½“ç³»ã‚’æŒã¡ã¾ã™ã€‚

## Google AI Studio æ¦‚è¦

!!! info "Google AI Studio ã¨ã¯"
    Google AI Studioã¯ã€Gemini APIã‚’ç°¡å˜ã«ãƒ†ã‚¹ãƒˆãƒ»ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã§ãã‚‹Webé–‹ç™ºç’°å¢ƒã§ã™ã€‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸è¦ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒ†ã‚¹ãƒˆã—ã€ãã®ã¾ã¾APIåŒ–ã§ãã¾ã™ã€‚

**ä¸»ãªç‰¹å¾´**:
- **ç„¡æ–™ã§åˆ©ç”¨é–‹å§‹å¯èƒ½**
- **ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ã®é–‹ç™ºç’°å¢ƒ**
- **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆæ”¯æ´**
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ†ã‚¹ãƒˆ**
- **è‡ªå‹•ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**ï¼ˆPython, Node.jsç­‰ï¼‰

### ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

1. [aistudio.google.com](https://aistudio.google.com) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³
3. åˆ©ç”¨è¦ç´„ã«åŒæ„
4. ç„¡æ–™æ å†…ã§å³åº§ã«åˆ©ç”¨é–‹å§‹

## Gemini API ä»•æ§˜

### åˆ©ç”¨å¯èƒ½ãƒ¢ãƒ‡ãƒ«ï¼ˆ2026å¹´2æœˆç¾åœ¨ï¼‰

| ãƒ¢ãƒ‡ãƒ« | ç‰¹å¾´ | ç”¨é€” | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé•· |
|--------|------|------|---------------|
| **Gemini 3 Pro** | æœ€é«˜æ€§èƒ½ | è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ | 200ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ |
| **Gemini 2.5 Pro** | é«˜æ€§èƒ½ãƒ»ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ« | æ±ç”¨çš„ãªæ¥­å‹™ | 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ |
| **Gemini 2.5 Flash** | é«˜é€Ÿãƒ»åŠ¹ç‡çš„ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç† | 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ |
| **Gemini 2.5 Flash Lite** | è»½é‡ãƒ»ä½ã‚³ã‚¹ãƒˆ | å¤§é‡å‡¦ç† | 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ |

### æ–™é‡‘ä½“ç³»ï¼ˆGoogle AI Studioï¼‰

!!! note "ç„¡æ–™æ "
    Google AI Studioã§ã¯ã€ä»¥ä¸‹ã®ç„¡æ–™æ ãŒã‚ã‚Šã¾ã™ï¼š
    
    **Gemini 2.5 Flash**:
    - å…¥åŠ›: 150ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³/æœˆ
    - å‡ºåŠ›: 150ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³/æœˆ
    
    **Gemini 2.5 Proï¼ˆåˆ¶é™ä»˜ãï¼‰**:
    - 1æ—¥50ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    - 3æ™‚é–“ã«15ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆãƒãƒ¼ã‚¹ãƒˆåˆ¶é™ï¼‰

**æœ‰æ–™æ–™é‡‘ï¼ˆè¶…éåˆ†ï¼‰**:

```
Gemini 2.5 Flash:
- å…¥åŠ›: $0.075 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³
- å‡ºåŠ›: $0.30 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³

Gemini 2.5 Pro:
- å…¥åŠ›: $1.25 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³
- å‡ºåŠ›: $5.00 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³

Gemini 3 Pro:
- å…¥åŠ›: $2.50 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³
- å‡ºåŠ›: $10.00 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³
```

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™

| ãƒ¢ãƒ‡ãƒ« | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ/åˆ† | ãƒˆãƒ¼ã‚¯ãƒ³/åˆ† |
|--------|--------------|------------|
| Flash | 1,000 | 400ä¸‡ |
| Pro | 360 | 120ä¸‡ |
| 3 Pro | 180 | 80ä¸‡ |

## Vertex AI ã§ã®åˆ©ç”¨

!!! info "Vertex AI ã¨ã¯"
    Google Cloudã®ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºAIãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚ä¼æ¥­ãƒ¬ãƒ™ãƒ«ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã€SLA ã‚’æä¾›ã—ã¾ã™ã€‚

**Google AI Studio ã¨ã®é•ã„**:

| é …ç›® | Google AI Studio | Vertex AI |
|------|-----------------|-----------|
| **å¯¾è±¡** | é–‹ç™ºè€…ãƒ»å€‹äºº | ä¼æ¥­ãƒ»æœ¬æ ¼é‹ç”¨ |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** | æ¨™æº– | ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç´š |
| **SLA** | ãªã— | 99.5%ã€œ99.9% |
| **ãƒ‡ãƒ¼ã‚¿ä¿æŒ** | Googleç®¡ç† | é¡§å®¢ç®¡ç† |
| **æ–™é‡‘** | å¾“é‡èª²é‡‘ã®ã¿ | å¾“é‡+å›ºå®šãƒ—ãƒ©ãƒ³ |
| **ã‚µãƒãƒ¼ãƒˆ** | ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ | ä¼æ¥­ã‚µãƒãƒ¼ãƒˆ |

**Vertex AI æ–™é‡‘ä¾‹**ï¼ˆä¸€éƒ¨ï¼‰:
```
Gemini 2.5 Proï¼ˆVertex AIï¼‰:
- å…¥åŠ›: $1.25 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³
- å‡ºåŠ›: $5.00 / 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³
- æœ€å°åˆ©ç”¨æ–™é‡‘: æœˆé¡$0ï¼ˆå¾“é‡èª²é‡‘ï¼‰

ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½:
- Private Service Connect: $0.01/æ™‚é–“
- Customer Managed Encryption Keys (CMEK): è¿½åŠ æ–™é‡‘ãªã—
```

## ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ« API

### ç”»åƒå‡¦ç†

**å¯¾å¿œå½¢å¼**: JPEG, PNG, GIF, WebP
**æœ€å¤§ã‚µã‚¤ã‚º**: 20MB
**æœ€å¤§è§£åƒåº¦**: 3072 x 3072

```python
import google.generativeai as genai

genai.configure(api_key="YOUR_API_KEY")

model = genai.GenerativeModel('gemini-2.5-pro')

# ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
with open('image.jpg', 'rb') as f:
    image_data = f.read()

response = model.generate_content([
    "ã“ã®ç”»åƒã®å†…å®¹ã‚’è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„ã€‚",
    {"mime_type": "image/jpeg", "data": image_data}
])

print(response.text)
```

### å‹•ç”»å‡¦ç†

**å¯¾å¿œå½¢å¼**: MP4, MOV, AVI, FLV, MKV, WebM
**æœ€å¤§ã‚µã‚¤ã‚º**: 2GB
**æœ€å¤§é•·**: 10æ™‚é–“

```python
# å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
video_file = genai.upload_file(path="meeting.mp4")

# å‡¦ç†å¾…ã¡
import time
while video_file.state.name == "PROCESSING":
    print("å‹•ç”»ã‚’å‡¦ç†ä¸­...")
    time.sleep(5)
    video_file = genai.get_file(video_file.name)

# å‹•ç”»åˆ†æ
response = model.generate_content([
    "ã“ã®ä¼šè­°å‹•ç”»ã‹ã‚‰ä¸»è¦ãªæ±ºå®šäº‹é …ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚",
    video_file
])

print(response.text)
```

### PDFãƒ»æ–‡æ›¸å‡¦ç†

```python
# PDFãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†
pdf_file = genai.upload_file(path="report.pdf")

response = model.generate_content([
    "ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã®è¦ç‚¹ã‚’3ã¤ã®ãƒã‚¤ãƒ³ãƒˆã§ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚",
    pdf_file
])

print(response.text)
```

## Function Calling

!!! tip "Function Calling ã¨ã¯"
    Gemini APIãŒå¤–éƒ¨é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚„å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºãŒå¯èƒ½ã«ãªã‚‹æ©Ÿèƒ½ã§ã™ã€‚

### åŸºæœ¬çš„ãªå®Ÿè£…

```python
def get_weather(location: str) -> dict:
    """æŒ‡å®šã—ãŸåœ°åŸŸã®å¤©æ°—æƒ…å ±ã‚’å–å¾—"""
    # å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ï¼ˆä¾‹ï¼šOpenWeatherMapï¼‰
    return {
        "location": location,
        "temperature": "22Â°C",
        "condition": "æ™´ã‚Œ",
        "humidity": "65%"
    }

# é–¢æ•°ã®å®šç¾©
weather_tool = genai.protos.Tool(
    function_declarations=[
        genai.protos.FunctionDeclaration(
            name="get_weather",
            description="æŒ‡å®šã—ãŸåœ°åŸŸã®ç¾åœ¨ã®å¤©æ°—æƒ…å ±ã‚’å–å¾—ã—ã¾ã™",
            parameters=genai.protos.Schema(
                type=genai.protos.Type.OBJECT,
                properties={
                    "location": genai.protos.Schema(
                        type=genai.protos.Type.STRING,
                        description="å¤©æ°—ã‚’èª¿ã¹ãŸã„åœ°åŸŸå"
                    )
                },
                required=["location"]
            )
        )
    ]
)

# ãƒ¢ãƒ‡ãƒ«è¨­å®š
model = genai.GenerativeModel(
    'gemini-2.5-pro',
    tools=[weather_tool]
)

# å®Ÿè¡Œ
chat = model.start_chat()
response = chat.send_message("æ±äº¬ã®ä»Šæ—¥ã®å¤©æ°—ã¯ã©ã†ã§ã™ã‹ï¼Ÿ")

# Function Callingã®å‡¦ç†
for part in response.parts:
    if fn := part.function_call:
        args = dict(fn.args)
        result = get_weather(**args)
        
        # çµæœã‚’è¿”é€
        response = chat.send_message(
            genai.protos.Part(
                function_response=genai.protos.FunctionResponse(
                    name=fn.name,
                    response={"result": result}
                )
            )
        )
        
print(response.text)
```

### é«˜åº¦ãªä¾‹ï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æº

```python
import sqlite3

def search_products(category: str, price_max: int) -> list:
    """å•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å•†å“ã‚’æ¤œç´¢"""
    conn = sqlite3.connect('products.db')
    cursor = conn.cursor()
    
    query = """
    SELECT name, price, description 
    FROM products 
    WHERE category = ? AND price <= ?
    ORDER BY price DESC
    LIMIT 5
    """
    
    cursor.execute(query, (category, price_max))
    results = cursor.fetchall()
    conn.close()
    
    return [
        {"name": row[0], "price": row[1], "description": row[2]}
        for row in results
    ]

# ãƒ„ãƒ¼ãƒ«å®šç¾©
search_tool = genai.protos.Tool(
    function_declarations=[
        genai.protos.FunctionDeclaration(
            name="search_products",
            description="æŒ‡å®šã—ãŸæ¡ä»¶ã§å•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ¤œç´¢",
            parameters=genai.protos.Schema(
                type=genai.protos.Type.OBJECT,
                properties={
                    "category": genai.protos.Schema(
                        type=genai.protos.Type.STRING,
                        description="å•†å“ã‚«ãƒ†ã‚´ãƒªï¼ˆelectronics, books, clothingç­‰ï¼‰"
                    ),
                    "price_max": genai.protos.Schema(
                        type=genai.protos.Type.INTEGER,
                        description="æœ€å¤§äºˆç®—ï¼ˆå††ï¼‰"
                    )
                },
                required=["category", "price_max"]
            )
        )
    ]
)
```

## ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°

!!! info "ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã¨ã¯"
    é•·ã„æ–‡æ›¸ã‚„ãƒ‡ãƒ¼ã‚¿ã‚’äº‹å‰ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã§ã€ç¹°ã‚Šè¿”ã—ä½¿ç”¨æ™‚ã®ã‚³ã‚¹ãƒˆã¨å¿œç­”æ™‚é–“ã‚’å‰Šæ¸›ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

**åˆ©ç”¨ã‚·ãƒ¼ãƒ³**:
- å¤§ããªãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ»ä»•æ§˜æ›¸ã®åˆ†æ
- é•·æ™‚é–“ã®ä¼šè­°éŒ²éŸ³ã®å‡¦ç†
- å¤§é‡ã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æ

```python
# å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
document = genai.upload_file(path="large_manual.pdf")

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½œæˆ
cache = genai.caching.CachedContent.create(
    model='gemini-2.5-pro',
    contents=[document],
    ttl=datetime.timedelta(hours=1),  # 1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
)

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã—ã¦ãƒ¢ãƒ‡ãƒ«ä½œæˆ
model = genai.GenerativeModel.from_cached_content(cached_content=cache)

# é«˜é€Ÿãªå¿œç­”ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚’åˆ©ç”¨ï¼‰
response = model.generate_content("ã“ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®å®‰å…¨ã«é–¢ã™ã‚‹ç« ã®è¦ç‚¹ã¯ï¼Ÿ")
```

**ã‚³ã‚¹ãƒˆå‰Šæ¸›åŠ¹æœ**:
```
é€šå¸¸ã®å‡¦ç†: 1M ãƒˆãƒ¼ã‚¯ãƒ³ Ã— $1.25 = $1.25
ã‚­ãƒ£ãƒƒã‚·ãƒ¥åˆ©ç”¨: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½œæˆ $0.50 + ç¶™ç¶šåˆ©ç”¨ $0.25/æ™‚é–“
â†’ 5å›ä»¥ä¸Šä½¿ç”¨ã§å…ƒãŒå–ã‚Œã‚‹
```

## å®Ÿè·µçš„ãªã‚³ãƒ¼ãƒ‰ä¾‹

### Python ã«ã‚ˆã‚‹ REST API å®Ÿè£…

```python
import os
import requests
from flask import Flask, request, jsonify

app = Flask(__name__)

GEMINI_API_KEY = os.getenv('GEMINI_API_KEY')
GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent'

@app.route('/api/analyze', methods=['POST'])
def analyze_text():
    data = request.json
    text = data.get('text', '')
    task = data.get('task', 'summarize')
    
    # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
    prompts = {
        'summarize': f'ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’3ã¤ã®ãƒã‚¤ãƒ³ãƒˆã§è¦ç´„ã—ã¦ãã ã•ã„:\n{text}',
        'translate': f'ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è‡ªç„¶ãªæ—¥æœ¬èªã«ç¿»è¨³ã—ã¦ãã ã•ã„:\n{text}',
        'sentiment': f'ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã®æ„Ÿæƒ…åˆ†æã‚’è¡Œã„ã€ãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒã‚¬ãƒ†ã‚£ãƒ–/ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã§åˆ†é¡ã—ã¦ãã ã•ã„:\n{text}'
    }
    
    payload = {
        'contents': [{
            'parts': [{'text': prompts.get(task, text)}]
        }]
    }
    
    headers = {
        'Content-Type': 'application/json',
        'x-goog-api-key': GEMINI_API_KEY
    }
    
    try:
        response = requests.post(GEMINI_API_URL, json=payload, headers=headers)
        response.raise_for_status()
        
        result = response.json()
        generated_text = result['candidates'][0]['content']['parts'][0]['text']
        
        return jsonify({
            'success': True,
            'result': generated_text,
            'task': task
        })
        
    except Exception as e:
        return jsonify({
            'success': False,
            'error': str(e)
        }), 500

if __name__ == '__main__':
    app.run(debug=True)
```

### Node.js ã«ã‚ˆã‚‹ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å®Ÿè£…

```javascript
const { GoogleGenerativeAI } = require('@google/generative-ai');

const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);

async function streamingChat(userMessage, conversationHistory = []) {
    const model = genAI.getGenerativeModel({ model: 'gemini-2.5-pro' });
    
    // ä¼šè©±å±¥æ­´ã‚’å«ã‚€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
    const fullPrompt = [
        ...conversationHistory.map(msg => ({
            role: msg.role,
            parts: [{ text: msg.content }]
        })),
        {
            role: 'user',
            parts: [{ text: userMessage }]
        }
    ];
    
    const chat = model.startChat({
        history: fullPrompt.slice(0, -1)
    });
    
    const result = await chat.sendMessageStream(userMessage);
    
    // ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹
    let fullResponse = '';
    for await (const chunk of result.stream) {
        const chunkText = chunk.text();
        fullResponse += chunkText;
        
        // WebSocketã‚„SSEã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€ä¿¡
        console.log('Chunk:', chunkText);
    }
    
    return fullResponse;
}

// ä½¿ç”¨ä¾‹
(async () => {
    const conversation = [
        { role: 'user', content: 'Python ã®åŸºæœ¬ã‚’æ•™ãˆã¦' },
        { role: 'assistant', content: 'Pythonã¯...' }
    ];
    
    const response = await streamingChat(
        'å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ã‚‚å«ã‚ã¦èª¬æ˜ã—ã¦',
        conversation
    );
    
    console.log('Full response:', response);
})();
```

## OpenAI API ã¨ã®æ¯”è¼ƒ

### ä¸»ãªé•ã„

| é …ç›® | Gemini API | OpenAI API |
|------|------------|------------|
| **ãƒ¢ãƒ‡ãƒ«ç¨®é¡** | Pro/Flash/Liteç³»åˆ— | GPT-4o/4o-miniç³»åˆ— |
| **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé•·** | æœ€å¤§200ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ | æœ€å¤§128Kãƒˆãƒ¼ã‚¯ãƒ³ |
| **ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«** | âœ… ç”»åƒ/å‹•ç”»/PDF/éŸ³å£° | âœ… ç”»åƒ/éŸ³å£°ã®ã¿ |
| **ç„¡æ–™æ ** | âœ… æœˆ150ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ | âŒ ãªã— |
| **æ–™é‡‘** | Flash: $0.075/1M | 4o-mini: $0.15/1M |
| **Function Calling** | âœ… å¯¾å¿œ | âœ… å¯¾å¿œ |
| **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°** | âœ… å¯¾å¿œ | âœ… å¯¾å¿œ |
| **ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°** | ğŸ”„ é–‹ç™ºä¸­ | âœ… å¯¾å¿œ |

### ç§»è¡Œã®ãƒã‚¤ãƒ³ãƒˆ

**OpenAI â†’ Gemini ç§»è¡Œæ™‚ã®è€ƒæ…®äº‹é …**:

```python
# OpenAIå½¢å¼
openai_messages = [
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "Hello!"}
]

# Geminiå½¢å¼ã¸ã®å¤‰æ›
def convert_to_gemini_format(openai_messages):
    gemini_contents = []
    system_instruction = None
    
    for msg in openai_messages:
        if msg["role"] == "system":
            system_instruction = msg["content"]
        else:
            gemini_contents.append({
                "role": "user" if msg["role"] == "user" else "model",
                "parts": [{"text": msg["content"]}]
            })
    
    return gemini_contents, system_instruction

# ä½¿ç”¨ä¾‹
contents, system = convert_to_gemini_format(openai_messages)
model = genai.GenerativeModel(
    'gemini-2.5-pro',
    system_instruction=system
)
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### API ã‚­ãƒ¼ã®ç®¡ç†

```bash
# ç’°å¢ƒå¤‰æ•°ã§ã®ç®¡ç†
export GEMINI_API_KEY="your-api-key-here"

# .env ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨
echo "GEMINI_API_KEY=your-api-key-here" >> .env

# ã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ï¼ˆGoogle Secret Managerï¼‰
gcloud secrets create gemini-api-key --data-file=api-key.txt
```

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

```python
import time
from typing import Callable

def with_retry(max_retries=3, delay=1):
    def decorator(func: Callable):
        def wrapper(*args, **kwargs):
            for attempt in range(max_retries):
                try:
                    return func(*args, **kwargs)
                except Exception as e:
                    if "rate limit" in str(e).lower() and attempt < max_retries - 1:
                        time.sleep(delay * (2 ** attempt))  # Exponential backoff
                        continue
                    raise e
            return None
        return wrapper
    return decorator

@with_retry(max_retries=3)
def call_gemini_api(prompt):
    # APIå‘¼ã³å‡ºã—
    pass
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
def safe_generate_content(model, prompt):
    try:
        response = model.generate_content(prompt)
        
        # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒã‚§ãƒƒã‚¯
        if response.prompt_feedback.block_reason:
            return {
                'success': False,
                'error': 'Content was blocked',
                'reason': response.prompt_feedback.block_reason
            }
        
        return {
            'success': True,
            'content': response.text,
            'usage': response.usage_metadata
        }
        
    except Exception as e:
        return {
            'success': False,
            'error': str(e),
            'error_type': type(e).__name__
        }
```

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [Workspaceé€£æº](workspace.md) - Googleã‚µãƒ¼ãƒ“ã‚¹ã¨APIé€£æº
- [vs-Claude](vs-claude.md) - APIé¸æŠã®åˆ¤æ–­åŸºæº–
- [Gems](gems.md) - APIæ©Ÿèƒ½ã‚’Gems ã§æ´»ç”¨